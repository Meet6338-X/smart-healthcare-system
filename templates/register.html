{% extends "base.html" %}

{% block title %}Register - Smart Healthcare System{% endblock %}

{% block content %}
<section class="form-section">
    <div class="form-container">
        <div class="form-header">
            <h1>Patient Registration</h1>
            <p>Create your account to book appointments and access your health records</p>
        </div>

        <form method="POST" action="{{ url_for('register') }}" class="registration-form" onsubmit="return validateForm()">
            <!-- Account Information -->
            <div class="form-group-title">
                <span class="form-group-icon">üîê</span>
                <h3>Account Information</h3>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="username">Username <span class="required">*</span></label>
                    <input type="text" id="username" name="username" required 
                           placeholder="Choose a username" minlength="4" maxlength="50">
                </div>
                <div class="form-group">
                    <label for="email">Email <span class="required">*</span></label>
                    <input type="email" id="email" name="email" required 
                           placeholder="your.email@example.com">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="password">Password <span class="required">*</span></label>
                    <input type="password" id="password" name="password" required 
                           placeholder="Create a password" minlength="6">
                </div>
                <div class="form-group">
                    <label for="confirm_password">Confirm Password <span class="required">*</span></label>
                    <input type="password" id="confirm_password" name="confirm_password" required 
                           placeholder="Confirm your password">
                </div>
            </div>

            <!-- Personal Information -->
            <div class="form-group-title">
                <span class="form-group-icon">üë§</span>
                <h3>Personal Information</h3>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="first_name">First Name <span class="required">*</span></label>
                    <input type="text" id="first_name" name="first_name" required 
                           placeholder="Enter first name">
                </div>
                <div class="form-group">
                    <label for="last_name">Last Name <span class="required">*</span></label>
                    <input type="text" id="last_name" name="last_name" required 
                           placeholder="Enter last name">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="dob">Date of Birth <span class="required">*</span></label>
                    <input type="date" id="dob" name="dob" required>
                </div>
                <div class="form-group">
                    <label for="gender">Gender <span class="required">*</span></label>
                    <select id="gender" name="gender" required>
                        <option value="">Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="phone">Phone Number <span class="required">*</span></label>
                    <input type="tel" id="phone" name="phone" required 
                           placeholder="10-digit phone number" pattern="[0-9]{10}">
                </div>
                <div class="form-group">
                    <label for="blood_group">Blood Group</label>
                    <select id="blood_group" name="blood_group">
                        <option value="">Select Blood Group</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                    </select>
                </div>
            </div>

            <!-- Address Information -->
            <div class="form-group-title">
                <span class="form-group-icon">üìç</span>
                <h3>Address Information</h3>
            </div>

            <div class="form-group full-width">
                <label for="address">Street Address</label>
                <input type="text" id="address" name="address" 
                       placeholder="Enter your street address">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="city">City</label>
                    <input type="text" id="city" name="city" 
                           placeholder="Enter city">
                </div>
                <div class="form-group">
                    <label for="emergency_contact">Emergency Contact</label>
                    <input type="tel" id="emergency_contact" name="emergency_contact" 
                           placeholder="Emergency phone number" pattern="[0-9]{10}">
                </div>
            </div>

            <!-- Submit Button -->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-lg btn-block">
                    <span>Register</span>
                    <span class="btn-icon">‚Üí</span>
                </button>
            </div>

            <div class="form-footer">
                <p>Already have an account? <a href="{{ url_for('login') }}">Login here</a></p>
            </div>
        </form>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
function validateForm() {
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirm_password').value;
    const phone = document.getElementById('phone').value;
    const email = document.getElementById('email').value;
    
    // Password match validation
    if (password !== confirmPassword) {
        alert('Passwords do not match!');
        return false;
    }
    
    // Password length
    if (password.length < 6) {
        alert('Password must be at least 6 characters!');
        return false;
    }
    
    // Phone validation
    if (!/^[0-9]{10}$/.test(phone)) {
        alert('Please enter a valid 10-digit phone number!');
        return false;
    }
    
    // Email validation
    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        alert('Please enter a valid email address!');
        return false;
    }
    
    return true;
}
</script>
{% endblock %}
