{% extends "base.html" %}

{% block title %}Admin Dashboard - Smart Healthcare{% endblock %}

{% block content %}
<div class="dashboard-layout">
    <aside class="sidebar admin-sidebar">
        <div class="sidebar-header">
            <span class="role-badge admin">Admin</span>
            <h3>{{ session.name }}</h3>
        </div>
        <nav class="sidebar-nav">
            <a href="{{ url_for('admin_dashboard') }}" class="nav-item active"><span class="icon">ğŸ </span> Dashboard</a>
            <a href="{{ url_for('admin_doctors') }}" class="nav-item"><span class="icon">ğŸ‘¨â€âš•ï¸</span> Doctors</a>
            <a href="{{ url_for('admin_departments') }}" class="nav-item"><span class="icon">ğŸ¥</span> Departments</a>
            <div class="nav-divider"></div>
            <a href="{{ url_for('logout') }}" class="nav-item logout"><span class="icon">ğŸšª</span> Logout</a>
        </nav>
    </aside>

    <main class="dashboard-main">
        <div class="dashboard-header">
            <div>
                <h1>Admin Dashboard</h1>
                <p class="subtitle">System Overview & Management</p>
            </div>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon blue">ğŸ‘¨â€âš•ï¸</div>
                <div class="stat-info">
                    <span class="stat-value">{{ total_doctors }}</span>
                    <span class="stat-label">Doctors</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon green">ğŸ‘¥</div>
                <div class="stat-info">
                    <span class="stat-value">{{ total_patients }}</span>
                    <span class="stat-label">Patients</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon purple">ğŸ“…</div>
                <div class="stat-info">
                    <span class="stat-value">{{ total_appointments }}</span>
                    <span class="stat-label">Appointments</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon orange">ğŸ’°</div>
                <div class="stat-info">
                    <span class="stat-value">â‚¹{{ total_revenue }}</span>
                    <span class="stat-label">Revenue (Paid)</span>
                </div>
            </div>
        </div>

        <div class="dashboard-grid">
            <!-- Recent Appointments -->
            <div class="card">
                <div class="card-header">
                    <h3>ğŸ“… Recent Appointments</h3>
                </div>
                <div class="card-body">
                    {% if recent_appointments %}
                    <table class="data-table compact">
                        <thead>
                            <tr>
                                <th>Patient</th>
                                <th>Doctor</th>
                                <th>Date</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for apt in recent_appointments %}
                            <tr>
                                <td>{{ apt.patient }}</td>
                                <td>{{ apt.doctor }}</td>
                                <td>{{ apt.date }}</td>
                                <td><span class="status-badge {{ apt.status | lower }}">{{ apt.status }}</span></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    {% else %}
                    <p class="text-muted">No recent appointments</p>
                    {% endif %}
                </div>
            </div>

            <!-- Departments Overview -->
            <div class="card">
                <div class="card-header">
                    <h3>ğŸ¥ Departments</h3>
                    <a href="{{ url_for('admin_departments') }}" class="link">Manage â†’</a>
                </div>
                <div class="card-body">
                    <div class="dept-list">
                        {% for dept_id, dept in departments.items() %}
                        <div class="dept-item">
                            <span class="dept-name">{{ dept.name }}</span>
                            <span class="dept-location">{{ dept.location }}</span>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="card">
            <div class="card-header">
                <h3>âš¡ Quick Actions</h3>
            </div>
            <div class="card-body">
                <div class="quick-actions">
                    <a href="{{ url_for('admin_doctors') }}" class="action-btn">
                        <span class="action-icon">ğŸ‘¨â€âš•ï¸</span>
                        <span>Add Doctor</span>
                    </a>
                    <a href="{{ url_for('admin_departments') }}" class="action-btn">
                        <span class="action-icon">ğŸ¥</span>
                        <span>Add Department</span>
                    </a>
                </div>
            </div>
        </div>
    </main>
</div>
{% endblock %}
